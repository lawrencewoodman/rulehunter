title: "Who should call which segment?"
category: "acme"
tags:
  - repair
  - sales
  - printers
trainDataset:
  csv:
    filename: "csv/printer_repairs_callerstats.csv"
    hasHeader: true
    separator: ","
fields:
  - name
  - segment
  - conversion
  - callTime
  - callCost
  - numContacts
  - value
ruleGeneration:
  fields:
    - name
    - segment
aggregators:
  - name: "totalContacts"
    kind: "sum"
    arg: "numContacts"
  - name: "totalClientCharge"
    kind: "calc"
    arg: "totalContacts * 8"
  - name: "totalClientValue"
    kind: "sum"
    arg: "value"
  - name: "totalClientROI"
    kind: "calc"
    arg: "totalClientValue / (totalClientCharge + pow(0,totalClientCharge))"
  - name: "totalCCCallCosts"
    kind: "sum"
    arg: "callCost"
  - name: "totalCCCallTimeCost"
    kind: "sum"
    # Â£12 per hour divided into seconds (caller pay plus overheads)
    arg: "callTime * (12/60/60)"
  - name: "totalCCCosts"
    kind: "calc"
    arg: "(totalCCCallTimeCost + (totalCCCallCosts + pow(0,totalCCCallCosts)))"
  - name: "meanConversion"
    kind: "mean"
    arg: "conversion"
  - name: "totalCCROI"
    kind: "calc"
    arg: "totalClientCharge / totalCCCosts"
goals:
  - "totalCCROI >= 1.10"
  - "totalClientROI >= 15"
  - "meanConversion > 0.25"
  - "totalCCROI >= 1.25"
sortOrder:
  - aggregator: "goalsScore"
    direction: "descending"
  - aggregator: "totalClientValue"
    direction: "descending"
  - aggregator: "totalCCROI"
    direction: "descending"
  - aggregator: "meanConversion"
    direction: "descending"
when: "!hasRun || sinceLastRunMinutes > 40"
